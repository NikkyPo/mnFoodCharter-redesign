<!DOCTYPE html>
<html>
<head>
	<title>Minnesota Food Charter</title>
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/styles.css">
	<link href="https://fonts.googleapis.com/css?family=Raleway:400,700" rel="stylesheet">
  <link rel="stylesheet" href="https://js.arcgis.com/3.23/esri/css/esri.css">
	<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/myscripts.js"></script>
  <script src="https://js.arcgis.com/3.23/"></script>


<script>
require([
    "esri/map",
    "esri/layers/FeatureLayer",
    "esri/dijit/Legend",
    "dojo/_base/array",
    "dojo/parser",
    "dijit/layout/BorderContainer",
    "dijit/layout/ContentPane", 
    "dijit/layout/AccordionContainer",
    "dojo/domReady!"
  ],
  function(
    Map,
    FeatureLayer,
    Legend,
    arrayUtils,
    parser
  ) {
    parser.parse();

    var map = new Map("map", {
      basemap: "topo",
      center: [-93.749, 46.485],
      zoom: 6
    });

    var minnesota = new FeatureLayer("https://services.arcgis.com/8df8p0NlLFEShl0r/ArcGIS/rest/services/MN_Counties_NetworkCount/FeatureServer/0", {
      mode: FeatureLayer.MODE_ONDEMAND,
      outFields: ["*"]
    });
        minnesota.on("load", function(){
          minnesota.renderer.setColorInfo({field: 'Region', colors: ['#ffffff']});
          minnesota.renderer.setOpacityInfo({opacityValues: [0.00]});
        });

    var survey123 = new FeatureLayer("https://services.arcgis.com/8df8p0NlLFEShl0r/arcgis/rest/services/survey123_c66836257a704559b65408fa7c068782/FeatureServer/0", {
      mode: FeatureLayer.MODE_ONDEMAND
    });

    map.on("layers-add-result", function (evt) {
      var layerInfo = arrayUtils.map(evt.layers, function (layer, index) {
        return {layer:layer.layer, title:layer.layer.name};
      });
      if (layerInfo.length > 0) {
        var legendDijit = new Legend({
          map: map,
          layerInfos: layerInfo
        }, "legendDiv");
        legendDijit.startup();
      }
        });

    map.addLayers([minnesota, survey123]);

  });
</script>

</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light" style="background-color: #fff5e9;">
  <a class="navbar-brand" href="index.html"><img src="img/mfclogo.png" width="250"></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="true" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul id="nav" class="navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="about.html">About</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="map.html">Map</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Blog</a>
      </li>
    </ul>
  </div>
</nav>

<div id="content"
     data-dojo-type="dijit/layout/BorderContainer"
     data-dojo-props="design:'headline', gutters:true"
     style="width: 100%; height: 100%; margin-top: 0px;">

  <div id="rightPane"
       data-dojo-type="dijit/layout/ContentPane"
       data-dojo-props="region:'right'">

    <div data-dojo-type="dijit/layout/AccordionContainer">
      <div data-dojo-type="dijit/layout/ContentPane" id="legendPane"
           data-dojo-props="title:'Minnesota Food Charter Legend', selected:true">
        <div id="legendDiv">      
        </div>
      </div>
      <div data-dojo-type="dijit/layout/ContentPane"
           data-dojo-props="title:'Tools'">
        This pane could contain tools or additional content
      </div>
    </div>
  </div>
  <div id="map"
       data-dojo-type="dijit/layout/ContentPane"
       data-dojo-props="region:'center'"
       style="overflow:hidden;">
  </div>
</div>


</body>
</html>